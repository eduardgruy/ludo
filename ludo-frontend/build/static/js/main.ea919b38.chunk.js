(this["webpackJsonpreact-typescript-authentication-example"]=this["webpackJsonpreact-typescript-authentication-example"]||[]).push([[0],{120:function(e,t,n){},122:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);var s=n(105),a=n.n(s),r=n(33),l=(n(120),n(8)),o=n(0),c=n(9),i=(n(121),n(122),n(115)),m=n(71),b=n.n(m),d="http://localhost:3000",j=function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null},u=j();console.log(u);var p=Object(i.a)("ws://127.0.0.1:3001",{transportOptions:{polling:{extraHeaders:{Authorization:"Bearer ".concat(null===u||void 0===u?void 0:u.accessToken)}}}}),h=Object(o.createContext)(p),g=n(13),O=n(28),f=n(1),y=function(e){var t=e.history,n=Object(o.useState)(!1),s=Object(l.a)(n,2),a=s[0],r=s[1],c=Object(o.useState)(""),i=Object(l.a)(c,2),m=i[0],j=i[1],u=O.a().shape({username:O.b().required("This field is required!"),password:O.b().required("This field is required!")});return Object(f.jsx)("div",{className:"col-md-12",children:Object(f.jsxs)("div",{className:"card card-container",children:[Object(f.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(f.jsx)(g.d,{initialValues:{username:"",password:""},validationSchema:u,onSubmit:function(e){var n=e.username,s=e.password;j(""),r(!0),function(e,t){return b.a.post(d+"/auth/login",{username:e,password:t}).then((function(e){return e.data.accessToken&&(console.log(e.data),localStorage.setItem("user",JSON.stringify(e.data))),e.data}))}(n,s).then((function(){t.push("/profile"),window.location.reload()}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();r(!1),j(t)}))},children:Object(f.jsxs)(g.c,{children:[Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{htmlFor:"username",children:"Username"}),Object(f.jsx)(g.b,{name:"username",type:"text",className:"form-control"}),Object(f.jsx)(g.a,{name:"username",component:"div",className:"alert alert-danger"})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{htmlFor:"password",children:"Password"}),Object(f.jsx)(g.b,{name:"password",type:"password",className:"form-control"}),Object(f.jsx)(g.a,{name:"password",component:"div",className:"alert alert-danger"})]}),Object(f.jsx)("div",{className:"form-group",children:Object(f.jsxs)("button",{type:"submit",className:"btn btn-primary btn-block",disabled:a,children:[a&&Object(f.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(f.jsx)("span",{children:"Login"})]})}),m&&Object(f.jsx)("div",{className:"form-group",children:Object(f.jsx)("div",{className:"alert alert-danger",role:"alert",children:m})})]})})]})})},v=function(){var e=Object(o.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],a=Object(o.useState)(""),r=Object(l.a)(a,2),c=r[0],i=r[1],m=O.a().shape({username:O.b().test("len","The username must be between 3 and 20 characters.",(function(e){return e&&e.toString().length>=3&&e.toString().length<=20})).required("This field is required!"),email:O.b().email("This is not a valid email.").required("This field is required!"),password:O.b().test("len","The password must be between 6 and 40 characters.",(function(e){return e&&e.toString().length>=6&&e.toString().length<=40})).required("This field is required!")});return Object(f.jsx)("div",{className:"col-md-12",children:Object(f.jsxs)("div",{className:"card card-container",children:[Object(f.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(f.jsx)(g.d,{initialValues:{username:"",email:"",password:""},validationSchema:m,onSubmit:function(e){var t=e.username;e.email;(function(e,t){return b.a.post(d+"/users/register",{username:e,password:t})})(t,e.password).then((function(e){i(e.data.message),s(!0)}),(function(e){var t=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();i(t),s(!1)}))},children:Object(f.jsxs)(g.c,{children:[!n&&Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{htmlFor:"username",children:" Username "}),Object(f.jsx)(g.b,{name:"username",type:"text",className:"form-control"}),Object(f.jsx)(g.a,{name:"username",component:"div",className:"alert alert-danger"})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{htmlFor:"email",children:" Email "}),Object(f.jsx)(g.b,{name:"email",type:"email",className:"form-control"}),Object(f.jsx)(g.a,{name:"email",component:"div",className:"alert alert-danger"})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{htmlFor:"password",children:" Password "}),Object(f.jsx)(g.b,{name:"password",type:"password",className:"form-control"}),Object(f.jsx)(g.a,{name:"password",component:"div",className:"alert alert-danger"})]}),Object(f.jsx)("div",{className:"form-group",children:Object(f.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Sign Up"})})]}),c&&Object(f.jsx)("div",{className:"form-group",children:Object(f.jsx)("div",{className:n?"alert alert-success":"alert alert-danger",role:"alert",children:c})})]})})]})})},x=n(10),N=function(){var e=Object(o.useState)(void 0),t=Object(l.a)(e,2),n=t[0],s=t[1],a=Object(o.useContext)(h),r=Object(o.useCallback)((function(e){console.log("got new games",e),e&&s((function(t){return t?[].concat(Object(x.a)(t),Object(x.a)(e)):Object(x.a)(e)}))}),[]);return console.log("test"),Object(o.useEffect)((function(){return a.emit("get-games"),a.on("games",(function(e){return r(e)})),function(){a.off("games",(function(e){return r(e)}))}}),[r,a]),Object(f.jsx)("div",{className:"container",children:n?n.map((function(e){return Object(f.jsxs)("li",{className:"card card-container",children:[Object(f.jsxs)("p",{children:["Name: ",e.name]}),Object(f.jsxs)("p",{children:["Players: ",e.players.length,"/4"]})]},e._id)})):Object(f.jsx)("p",{children:"no active rooms atm"})})},w=function(){var e=j();return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("header",{className:"jumbotron",children:Object(f.jsxs)("h3",{children:[Object(f.jsx)("strong",{children:e.username})," Profile"]})}),Object(f.jsxs)("p",{children:[Object(f.jsx)("strong",{children:"Id:"})," ",e.username]})]})},S=function(e){return Object(f.jsx)("div",{className:"container",children:e.messages.map((function(e){return Object(f.jsx)("p",{children:e})}))})},k=n(60),q=n(47);function E(e){return Object(f.jsx)("span",{children:Object(f.jsx)("figure",{className:"egg "+(e.movable?"glow":""),style:{background:"radial-gradient(circle at 33% 33%, "+{green:"#66bb6a",yellow:"#fff176",blue:"#29b6f6",red:"#e53935"}[e.colors]+", #000)",height:"60%",width:"70%"}})})}var T=[{name:"n1",style:{top:"40%"}},{name:"n2",class:"g-start",style:{top:"40%",left:"6.66%"}},{name:"n3",style:{top:"40%",left:"13.32%"}},{name:"n4",style:{top:"40%",left:"19.98%"}},{name:"n5",style:{top:"40%",left:"26.64%"}},{name:"n6",style:{top:"40%",left:"33.3%"}},{name:"n7",style:{top:"33.3%",left:"40%"}},{name:"n8",style:{top:"26.64%",left:"40%"}},{name:"n9",style:{top:"19.98%",left:"40%"}},{name:"n10",style:{top:"13.32%",left:"40%"}},{name:"n11",style:{top:"6.66%",left:"40%"}},{name:"n12",style:{top:0,left:"40%"}},{name:"n13",style:{top:0,left:"46.66%"}},{name:"n14",style:{top:0,left:"53.32%"}},{name:"n15",class:"y-start",style:{top:"6.66%",right:"40%"}},{name:"n16",style:{top:"13.32%",right:"40%"}},{name:"n17",style:{top:"19.98%",right:"40%"}},{name:"n18",style:{top:"26.64%",right:"40%"}},{name:"n19",style:{top:"33.3%",right:"40%"}},{name:"n20",style:{top:"40%",right:"33.3%"}},{name:"n21",style:{top:"40%",right:"26.64%"}},{name:"n22",style:{top:"40%",right:"19.98%"}},{name:"n23",style:{top:"40%",right:"13.32%"}},{name:"n24",style:{top:"40%",right:"6.66%"}},{name:"n25",style:{top:"40%",right:"0%"}},{name:"n26",style:{top:"46.66%",right:"0%"}},{name:"n27",style:{top:"53.32%",right:"0%"}},{name:"n28",class:"b-start",style:{top:"53.32%",right:"6.66%"}},{name:"n29",style:{top:"53.32%",right:"13.32%"}},{name:"n30",style:{top:"53.32%",right:"19.98%"}},{name:"n31",style:{top:"53.32%",right:"26.64%"}},{name:"n32",style:{top:"53.32%",right:"33.3%"}},{name:"n33",style:{bottom:"33.3%",right:"40%"}},{name:"n34",style:{bottom:"26.64%",right:"40%"}},{name:"n35",style:{bottom:"19.98%",right:"40%"}},{name:"n36",style:{bottom:"13.32%",right:"40%"}},{name:"n37",style:{bottom:"6.66%",right:"40%"}},{name:"n38",style:{bottom:"0",right:"40%"}},{name:"n39",style:{bottom:"0",left:"46.66%"}},{name:"n40",style:{bottom:"0",left:"40%"}},{name:"n41",class:"r-start",style:{bottom:"6.66%",left:"40%"}},{name:"n42",style:{bottom:"13.32%",left:"40%"}},{name:"n43",style:{bottom:"19.98%",left:"40%"}},{name:"n44",style:{bottom:"26.64%",left:"40%"}},{name:"n45",style:{bottom:"33.3%",left:"40%"}},{name:"n52",style:{left:0,top:"46.66%"}},{name:"n51",style:{bottom:"40%"}},{name:"n50",style:{bottom:"40%",left:"6.66%"}},{name:"n49",style:{bottom:"40%",left:"13.32%"}},{name:"n48",style:{bottom:"40%",left:"19.98%"}},{name:"n47",style:{bottom:"40%",left:"26.64%"}},{name:"n46",style:{bottom:"40%",left:"33.3%"}},{name:"hr1",class:"red",style:{bottom:"6.66%",left:"46.66%"}},{name:"hr2",class:"red",style:{bottom:"13.32%",left:"46.66%"}},{name:"hr3",class:"red",style:{bottom:"19.98%",left:"46.66%"}},{name:"hr4",class:"red",style:{bottom:"26.64%",left:"46.66%"}},{name:"hr5",class:"red",style:{bottom:"33.3%",left:"46.66%"}},{name:"hy1",class:"yellow",style:{top:"6.66%",left:"46.66%"}},{name:"hy2",class:"yellow",style:{top:"13.32%",left:"46.66%"}},{name:"hy3",class:"yellow",style:{top:"19.98%",left:"46.66%"}},{name:"hy4",class:"yellow",style:{top:"26.64%",left:"46.66%"}},{name:"hy5",class:"yellow",style:{top:"33.3%",left:"46.66%"}},{name:"hg1",class:"green",style:{top:"46.66%",left:"6.66%"}},{name:"hg2",class:"green",style:{top:"46.66%",left:"13.32%"}},{name:"hg3",class:"green",style:{top:"46.66%",left:"19.98%"}},{name:"hg4",class:"green",style:{top:"46.66%",left:"26.64%"}},{name:"hg5",class:"green",style:{top:"46.66%",left:"33.3%"}},{name:"hb1",class:"blue",style:{top:"46.66%",right:"6.66%"}},{name:"hb2",class:"blue",style:{top:"46.66%",right:"13.32%"}},{name:"hb3",class:"blue",style:{top:"46.66%",right:"19.98%"}},{name:"hb4",class:"blue",style:{top:"46.66%",right:"26.64%"}},{name:"hb5",class:"blue",style:{top:"46.66%",right:"33.3%"}}];function I(e){var t=Object(o.useState)([""]),n=Object(l.a)(t,2),s=n[0],a=n[1];return Object(o.useEffect)((function(){a(Object.entries(e.positions).reduce((function(t,n){var s=Object(l.a)(n,2),a=s[0],r=s[1].reduce((function(t,n){return Object(q.a)(Object(q.a)({},t),{},Object(k.a)({},n.position,{color:a,movable:!!e.movable.find((function(e){return n.name==e}))}))}),{});return Object(q.a)(Object(q.a)({},t),r)}),{}))}),[]),Object(f.jsxs)("div",{className:"game",children:[["green","yellow","red","blue"].map((function(e){var t="green"==e?{}:"yellow"==e?{right:0}:"red"==e?{bottom:0}:{bottom:0,right:0};return Object(f.jsx)("div",{className:"house "+e,style:t,children:Object(f.jsx)("div",{className:"box",children:["one","two","three","four"].map((function(t,n){var a=e.substring(0,1)+String(n+1);return Object(f.jsx)("div",{className:"square square-"+t+" "+e,children:s[a]?Object(f.jsx)(E,{colors:e,movable:s[a].movable}):null})}))})})})),T.map((function(e){return Object(f.jsxs)("div",{className:"cells "+e.class,style:e.style,children:[Object(f.jsx)("b",{children:e.name}),s[e.name]?Object(f.jsx)(E,{colors:s[e.name].color,movable:s[e.name].movable}):null]})}))]})}var L=function(){var e=Object(o.useState)({_id:"",status:"running",name:"myGame",owner:"randomUser",players:[{userId:"Alice",color:"green"},{userId:"Bob",color:"yellow"},{userId:"Alice",color:"blue"},{userId:"Alice",color:"red"}],winner:"",positions:{green:[{name:"g1",position:"n1"},{name:"g2",position:"g2"},{name:"g3",position:"g3"},{name:"g4",position:"g4"}],yellow:[{name:"y1",position:"y1"},{name:"y2",position:"y2"},{name:"y3",position:"y3"},{name:"y4",position:"y4"}],blue:[{name:"b1",position:"b1"},{name:"b2",position:"b2"},{name:"b3",position:"b3"},{name:"b4",position:"b4"}],red:[{name:"r1",position:"r1"},{name:"r2",position:"r2"},{name:"r3",position:"r3"},{name:"r4",position:"r4"}]},lastRoll:0,doubleRoll:!1,turn:"green",action:"roll",event:"Game started!",movable:["g1"]}),t=Object(l.a)(e,2),n=t[0],s=(t[1],Object(o.useState)([""])),a=Object(l.a)(s,2),r=a[0],c=a[1];Object(o.useEffect)((function(){c((function(e){return[].concat(Object(x.a)(e),[n.event])}))}),[n]);return Object(f.jsxs)("div",{className:"game-container",children:[Object(f.jsx)("div",{className:"chat-container",children:Object(f.jsx)(S,{messages:r})}),Object(f.jsx)("div",{className:"board-container",children:Object(f.jsx)(I,{positions:n.positions,movable:n.movable})})]})},C={on:function(e,t){document.addEventListener(e,(function(e){return t(e)}))},dispatch:function(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove:function(e,t){document.removeEventListener(e,t)}},F=function(){var e=Object(o.useState)(void 0),t=Object(l.a)(e,2),n=t[0],s=t[1];Object(o.useLayoutEffect)((function(){var e=j();return e&&s(e),C.on("logout",a),function(){C.remove("logout",a)}}),[]);var a=function(){localStorage.removeItem("user"),s(void 0)};return Object(f.jsxs)("div",{className:"screen",children:[Object(f.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(f.jsx)(r.b,{to:"/",className:"navbar-brand",children:"Ludo"}),Object(f.jsx)("div",{className:"navbar-nav mr-auto",children:Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(r.b,{to:"/lobby",className:"nav-link",children:"Lobby"})})}),n?Object(f.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(r.b,{to:"/profile",className:"nav-link",children:n.username})}),Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)("a",{href:"/login",className:"nav-link",onClick:a,children:"LogOut"})})]}):Object(f.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(r.b,{to:"/login",className:"nav-link",children:"Login"})}),Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(r.b,{to:"/register",className:"nav-link",children:"Sign Up"})})]})]}),Object(f.jsx)("div",{className:"container mt-3",children:Object(f.jsx)(h.Provider,{value:p,children:Object(f.jsxs)(c.c,{children:[Object(f.jsx)(c.a,{exact:!0,path:"/lobby",component:N}),Object(f.jsx)(c.a,{exact:!0,path:"/login",component:y}),Object(f.jsx)(c.a,{exact:!0,path:"/register",component:v}),Object(f.jsx)(c.a,{exact:!0,path:"/profile",component:w}),Object(f.jsx)(c.a,{exact:!0,path:"/game",component:L})]})})})]})};a.a.render(Object(f.jsx)(r.a,{children:Object(f.jsx)(F,{})}),document.getElementById("root"))}},[[249,1,2]]]);
//# sourceMappingURL=main.ea919b38.chunk.js.map